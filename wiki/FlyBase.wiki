#summary Load flybase on ec2
#labels flybase,ec2

= Load FlyBase on an XL Instance=
{{{
# create an extra large instance through the console
# create a volume of 40GB and attach it to the instance through the console
# format the volume to make it available for the instance
sudo modprobe xfs
sudo apt-get install xfsprogs
sudo mkfs.xfs /dev/sdi 

echo "/dev/sdi /media/virtuoso xfs noatime 0 0" | sudo tee -a /etc/fstab
sudo mkdir /media/virtuoso
sudo mount /media/virtuoso 

sudo mount /dev/sdh /mnt/data-store

# install virtuoso on /media/virtuoso

#### load flybase data using isql
#### see http://www.openlinksw.com/dataspace/dav/wiki/Main/VirtBulkRDFLoader
}}}

= Create a snapshot of the volume ==
{{{
### to make the volume available for a small instance
### stop the virtuoso service
lsof aux | grep virtuoso
### umount the disk
umount /mnt/virtuoso
### create a snapshot of the volume
ec2-create-snapshot volume_id
### describe a snapshot
ec2-describe-snapshots snap-78a54011
ec2-describe-snapshot-attribute snap-78a54011
}}}

= Attach the volume to a small instance =
{{{
## create another small instance of open-biomed
## create a volume using the snapshot

## attach the volume to the instance

## check virtuoso works and query works
}}}